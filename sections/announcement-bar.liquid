{%- style -%}
.announcement-bar--autoscroll {
  overflow: hidden;
  position: relative;
}
.announcement-bar__scroll-wrapper {
  display: flex;
  overflow: hidden;
  white-space: nowrap;
}
.announcement-bar__scroll-content {
  display: inline-flex;
  animation: scroll 20s linear infinite;
}
.announcement-bar__item {
  display: inline-block;
  padding: 0 2rem;
}
@keyframes scroll {
  0% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(-100%);
  }
}
{%- endstyle -%}


<div
  class="utility-bar color-{{ section.settings.color_scheme }} gradient{% if section.settings.show_line_separator and section.blocks.size > 0 %} utility-bar--bottom-border{% elsif section.settings.show_line_separator and section.settings.show_social and social_icons%} utility-bar--bottom-border-social-only{% endif %}{% if section.settings.enable_country_selector or section.settings.enable_language_selector %} header-localization{% endif %}"
  {{ block.shopify_attributes }}
>
  <div class="page-width utility-bar__grid{% if announcement_bar and language_country_selector or section.settings.show_social and social_icons %} utility-bar__grid--3-col{% elsif language_country_selector or section.settings.show_social and social_icons %} utility-bar__grid--2-col{% endif %}">
    {% comment %}
    {%- if section.settings.show_social and social_icons -%}
      {%- render 'social-icons' -%}
    {%- endif -%}
    {% endcomment %}

    {%- if section.blocks.size > 0 -%}
      <div
        class="announcement-bar announcement-bar--autoscroll"
        role="region"
        aria-label="{{ 'sections.header.announcement' | t }}"
        {{ block.shopify_attributes }}
      >
        <div class="announcement-bar__scroll-wrapper">
          <div class="announcement-bar__scroll-content">
            {%- for block in section.blocks -%}
              {%- if block.settings.text != blank -%}
                <div class="announcement-bar__item">
                  {%- if block.settings.link != blank -%}
                    <a
                      href="{{ block.settings.link }}"
                      class="announcement-bar__link link link--text focus-inset animate-arrow"
                    >
                  {%- endif -%}
                  <p class="announcement-bar__message h5">
                    <span>{{ block.settings.text | escape }}</span>
                    {%- if block.settings.link != blank -%}
                      {{- 'icon-arrow.svg' | inline_asset_content -}}
                    {%- endif -%}
                  </p>
                  {%- if block.settings.link != blank -%}
                    </a>
                  {%- endif -%}
                </div>
              {%- endif -%}
            {%- endfor -%}
          </div>
        </div>
      </div>
    {%- endif -%}

    {% comment %}
    <div class="localization-wrapper">
      {%- if section.settings.enable_country_selector and localization.available_countries.size > 1 -%}
        <localization-form class="small-hide medium-hide">
          {%- form 'localization', id: 'AnnouncementCountryForm', class: 'localization-form' -%}
            <div>
              <h2 class="visually-hidden" id="AnnouncementCountryLabel">{{ 'localization.country_label' | t }}</h2>
              {%- render 'country-localization', localPosition: 'AnnouncementCountry' -%}
            </div>
          {%- endform -%}
        </localization-form>
      {% endif %}

      {%- if section.settings.enable_language_selector and localization.available_languages.size > 1 -%}
        <localization-form class="small-hide medium-hide">
          {%- form 'localization', id: 'AnnouncementLanguageForm', class: 'localization-form' -%}
            <div>
              <h2 class="visually-hidden" id="AnnouncementLanguageLabel">{{ 'localization.language_label' | t }}</h2>
              {%- render 'language-localization', localPosition: 'AnnouncementLanguage' -%}
            </div>
          {%- endform -%}
        </localization-form>
      {%- endif -%}
    </div>
    {% endcomment %}
  </div>
</div>
